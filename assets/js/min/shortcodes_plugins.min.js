function base64_decode(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,n,o,r,c,u,a,s,l=0,d=0,h="",f=[];if(!e)return e;e+="";do r=t.indexOf(e.charAt(l++)),c=t.indexOf(e.charAt(l++)),u=t.indexOf(e.charAt(l++)),a=t.indexOf(e.charAt(l++)),s=r<<18|c<<12|u<<6|a,i=s>>16&255,n=s>>8&255,o=255&s,64==u?f[d++]=String.fromCharCode(i):64==a?f[d++]=String.fromCharCode(i,n):f[d++]=String.fromCharCode(i,n,o);while(l<e.length);return h=f.join(""),h=this.utf8_decode(h)}function base64_encode(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,n,o,r,c,u,a,s,l=0,d=0,h="",f=[];if(!e)return e;e=this.utf8_encode(e+"");do i=e.charCodeAt(l++),n=e.charCodeAt(l++),o=e.charCodeAt(l++),s=i<<16|n<<8|o,r=s>>18&63,c=s>>12&63,u=s>>6&63,a=63&s,f[d++]=t.charAt(r)+t.charAt(c)+t.charAt(u)+t.charAt(a);while(l<e.length);switch(h=f.join(""),e.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h}function utf8_decode(e){var t=[],i=0,n=0,o=0,r=0,c=0;for(e+="";i<e.length;)o=e.charCodeAt(i),128>o?(t[n++]=String.fromCharCode(o),i++):o>191&&224>o?(r=e.charCodeAt(i+1),t[n++]=String.fromCharCode((31&o)<<6|63&r),i+=2):(r=e.charCodeAt(i+1),c=e.charCodeAt(i+2),t[n++]=String.fromCharCode((15&o)<<12|(63&r)<<6|63&c),i+=3);return t.join("")}function utf8_encode(e){var t=e+"",i="",n,o,r=0;n=o=0,r=t.length;for(var c=0;r>c;c++){var u=t.charCodeAt(c),a=null;128>u?o++:a=u>127&&2048>u?String.fromCharCode(u>>6|192)+String.fromCharCode(63&u|128):String.fromCharCode(u>>12|224)+String.fromCharCode(u>>6&63|128)+String.fromCharCode(63&u|128),null!==a&&(o>n&&(i+=t.slice(n,o)),i+=a,n=o=c+1)}return o>n&&(i+=t.slice(n,r)),i}!function(e){e.extend(e.fn,{livequery:function(t,i,n){var o=this,r;return e.isFunction(t)&&(n=i,i=t,t=void 0),e.each(e.livequery.queries,function(e,c){return o.selector!=c.selector||o.context!=c.context||t!=c.type||i&&i.$lqguid!=c.fn.$lqguid||n&&n.$lqguid!=c.fn2.$lqguid?void 0:(r=c)&&!1}),r=r||new e.livequery(this.selector,this.context,t,i,n),r.stopped=!1,r.run(),this},expire:function(t,i,n){var o=this;return e.isFunction(t)&&(n=i,i=t,t=void 0),e.each(e.livequery.queries,function(r,c){o.selector!=c.selector||o.context!=c.context||t&&t!=c.type||i&&i.$lqguid!=c.fn.$lqguid||n&&n.$lqguid!=c.fn2.$lqguid||this.stopped||e.livequery.stop(c.id)}),this}}),e.livequery=function(t,i,n,o,r){return this.selector=t,this.context=i,this.type=n,this.fn=o,this.fn2=r,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,o.$lqguid=o.$lqguid||e.livequery.guid++,r&&(r.$lqguid=r.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,i){e.fn2.apply(i)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var t=this,i=this.elements,n=e(this.selector,this.context),o=n.not(i);this.elements=n,this.type?(o.bind(this.type,this.fn),i.length>0&&e.each(i,function(i,o){e.inArray(o,n)<0&&e.event.remove(o,t.type,t.fn)})):(o.each(function(){t.fn.apply(this)}),this.fn2&&i.length>0&&e.each(i,function(i,o){e.inArray(o,n)<0&&t.fn2.apply(o)}))}}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length)for(var t=e.livequery.queue.length;t--;)e.livequery.queries[e.livequery.queue.shift()].run()},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(t,i){if(e.fn[i]){var n=e.fn[i];e.fn[i]=function(){var t=n.apply(this,arguments);return e.livequery.run(),t}}})},run:function(t){void 0!=t?e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t):e.each(e.livequery.queries,function(t){e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(t){void 0!=t?e.livequery.queries[t].stop():e.each(e.livequery.queries,function(t){e.livequery.queries[t].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),e(function(){e.livequery.play()})}(jQuery),jQuery.fn.appendo=function(e){return this.each(function(){jQuery.appendo.init(this,e)}),this},jQuery.appendo=function(){var e=this;return this.opt={},this.init=function(t,i){function n(){var e=d.clone(l.copyHandlers);e.appendTo(t),r(1),"function"==typeof l.onAdd&&l.onAdd(e),l.focusFirst&&e.find("input:first").focus()}function o(){var e=jQuery(t).find(l.subSelect);("function"!=typeof l.onDel||l.onDel(e))&&(e.remove(),r(-1))}function r(e){h+=e||0,l.allowDelete&&h>1?p.show():p.hide()}function c(e){return jQuery("<button />").css(l.buttonStyle).html(e)}function u(e){return e.stopPropagation(),e.preventDefault(),!1}function a(e){return(!l.maxRows||h<l.maxRows)&&n(),u(e)}function s(e){return h>1&&o(),u(e)}var l=jQuery.extend({labelAdd:"Add Row",labelDel:"Remove",allowDelete:!0,copyHandlers:!1,focusFirst:!0,onAdd:function(){return!0},onDel:function(){return!0},maxRows:0,wrapClass:"appendoButtons",wrapStyle:{padding:".4em .2em .5em"},buttonStyle:{marginRight:".5em"},subSelect:"tr:last"},e.opt,i),d=jQuery(t).find(l.subSelect).clone(l.copyHandlers),h=1,f=jQuery("#form-child-add").click(a),p=c(l.labelDel).click(s).hide();r()},this}();var FontAwesomeIcons;!function($){"use strict";FontAwesomeIcons=function(){var e="";return $.each(stIconObj.fontawesome,function(t,i){e+='<span class="icon-category">'+t+"</span>",i.map(function(t){e+='<i class="fa '+t.id+'" data-icon-id="'+t.id.replace("fa-","")+'" title="'+t.name+'"></i>'})}),e}}(jQuery),jQuery(document).ready(function($){var e={loadVals:function(){var e=$("#_cce_shortcode").text(),t=e;$(".cce-input").each(function(){var e=$(this),i=e.attr("id"),i=i.replace("cce_",""),n=new RegExp("{{"+i+"}}","g");t=t.replace(n,e.val())}),$("#_cce_ushortcode").remove(),$("#cce-sc-form > ul").prepend('<div id="_cce_ushortcode" class="hidden">'+t+"</div>")},cLoadVals:function(){var e=$("#_cce_cshortcode").text(),t="";shortcodes="",$(".child-clone-row").each(function(){var t=$(this),i=e;$(".cce-cinput",this).each(function(){var e=$(this),t=e.attr("id"),t=t.replace("cce_","");re=new RegExp("{{"+t+"}}","g"),i=i.replace(re,e.val())}),shortcodes=shortcodes+i+"\n"}),$("#_cce_cshortcodes").remove(),$(".child-clone-rows").prepend('<div id="_cce_cshortcodes" class="hidden">'+shortcodes+"</div>"),this.loadVals(),t=$("#_cce_ushortcode").text().replace("{{child_shortcode}}",shortcodes),$("#_cce_ushortcode").remove(),$("#cce-sc-form > ul").prepend('<div id="_cce_ushortcode" class="hidden">'+t+"</div>")},children:function(){$(".child-clone-rows").appendo({subSelect:"> div.child-clone-row:last-child",allowDelete:!1,focusFirst:!1}),$(".child-clone-row-remove").live("click",function(){var e=$(this),t=e.parent();return $(".child-clone-row").size()>1?t.remove():alert("You need a minimum of one row"),!1}),$(".child-clone-rows").sortable({placeholder:"sortable-placeholder",items:".child-clone-row"})},resizeTB:function(){var e=$("#TB_ajaxContent"),t=$("#TB_window"),i=$("#TB_title"),n=$("#cce-popup");f=920<jQuery(window).width()?920:jQuery(window).width(),b=n.outerHeight()+i.outerHeight()>jQuery(window).height()?jQuery(window).height()-100:n.outerHeight()+i.outerHeight(),t.css({height:b,maxHeight:b,width:f,marginLeft:-(f/2)}),e.css({paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0,height:n.outerHeight()+i.outerHeight()>jQuery(window).height()?b-i.outerHeight():b,overflow:"auto",width:f}),$("#cce-popup").addClass("no_preview")},media:function(){var e,t,i=$(".cce-open-media");"image"===i.data("type")?t=CCShortcodes.media_frame_image_title:"video"===i.data("type")&&(t=CCShortcodes.media_frame_video_title),i.on("click",function(n){return n.preventDefault(),e?void e.open():(e=wp.media.frames.cce_media_frame=wp.media({className:"media-frame cce-media-frame",frame:"select",multiple:!1,title:t,library:{type:i.data("type")},button:{text:i.data("text")}}),e.on("select",function(){var t=e.state().get("selection").first().toJSON();$("#cce_src").val(t.url),$(".cce-input").trigger("change")}),void e.open())})},load:function(){var e=this,t=$("#TB_window"),i=$("#cce-popup"),n=$("#TB_title #TB_ajaxWindowTitle");popupTitle=$("#_cce_popup_title").text(),form=$("#cce-sc-form",i),shortcode=$("#_cce_shortcode",form).text(),popupType=$("#_cce_popup",form).text(),uShortcode="",iconSelector=$(".cce-all-icons").find("i"),e.resizeTB(),$(window).resize(function(){e.resizeTB()}),t.css({border:"none"}),n.text(popupTitle),e.loadVals(),e.children(),e.cLoadVals(),e.media(),$(".cce-cinput",form).live("change",function(){e.cLoadVals()}),$(".cce-input",form).live("change",function(){e.loadVals(),e.cLoadVals()}),$(".cce-input.cce-form-color",form).on("blur",function(){e.loadVals()});var o=$(".cce-all-icons");o.append(FontAwesomeIcons()),o.on("click","i",function(e){o.find("i").removeClass("active-icon"),$(this).addClass("active-icon"),$("#cce_icon").val($(this).data("icon-id")),$(".cce-input").trigger("change")}),$(".cce-insert").click(function(){if($(".cce-input.cce-form-color").blur(),window.tinyMCE){var e=tinyMCE.majorVersion;"3"===e?(window.tinyMCE.execInstanceCommand(window.tinyMCE.activeEditor.id,"mceInsertContent",!1,$("#_cce_ushortcode",form).html()),tb_remove()):"4"===e&&(window.tinyMCE.activeEditor.insertContent($("#_cce_ushortcode",form).html()),tb_remove())}})}};$("#cce-popup").livequery(function(){e.load()})});